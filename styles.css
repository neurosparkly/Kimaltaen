/* ===================================================================
   Kimaltaen – styles.css
   - Yhtenäinen ulkoasu koko sivustolle (header, kortit, grid, lomake)
   - Dark mode, reduced motion, saavutettavuusystävälliset tilat
   - Noudattaa .km-* komponentteja ja sivukohtaisia rakenteita
=================================================================== */

/* ---------------------------
   0) Perusreset & laatikkomalli
---------------------------- */
*,*::before,*::after { box-sizing: border-box; }
html { -webkit-text-size-adjust: 100%; }
body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--ink);
  background: var(--bg);
  line-height: 1.6;
  text-rendering: optimizeLegibility;
}
img,svg,video { display: block; max-width: 100%; height: auto; }
a { color: var(--brand); text-decoration: none; }
a:hover { text-decoration: underline; }

/* ---------------------------
   1) Design-tunnukset (tokens)
---------------------------- */
:root{
  /* Värit (vaalea) */
  --ink:#1b1b1f;
  --muted:#5a5a6a;
  --bg:#faf9fc;
  --card:#ffffff;
  --brand:#4a148c;      /* pääbrändi (violetti) */
  --brand-05:#f3eafe;   /* brändin vaalea pinta */
  --ring:rgba(74,20,140,.22);
  --border:rgba(0,0,0,.08);
  --surface:#f7f7fb;

  /* Mitat & rytmi */
  --radius:14px;
  --shadow:0 10px 22px rgba(0,0,0,.08);
  --space-1:4px;  --space-2:8px;  --space-3:12px; --space-4:16px;
  --space-5:24px; --space-6:32px; --space-7:48px; --space-8:64px;

  /* Typografia (clamp skaala) */
  --fs-xxs: clamp(12px, .72vw, 13px);
  --fs-xs:  clamp(13px, .78vw, 14px);
  --fs-sm:  clamp(14px, .9vw, 16px);
  --fs-md:  clamp(16px, 1.1vw, 18px);
  --fs-lg:  clamp(18px, 1.4vw, 22px);
  --fs-xl:  clamp(22px, 2.1vw, 28px);
  --fs-2xl: clamp(28px, 3vw, 36px);
  --fs-3xl: clamp(36px, 4vw, 48px);

  /* Säiliö */
  --container:1100px;
  --gutter:20px;
}

/* Dark mode */
@media (prefers-color-scheme: dark){
  :root{
    --ink:#f2effa;
    --muted:#c5bfd6;
    --bg:#0f0b16;
    --card:#16101f;
    --brand:#c6a4ff;
    --brand-05:#231a34;
    --ring:rgba(198,164,255,.35);
    --border:rgba(255,255,255,.1);
    --surface:#1b1526;
  }
  img { filter: brightness(.98) contrast(1.02); }
}

/* ---------------------------
   2) Rakenne & typografia
---------------------------- */
.container { max-width: var(--container); margin-inline: auto; padding-inline: clamp(16px, 2vw, var(--gutter)); }
section { padding-block: var(--space-6); }
.section--tight { padding-block: var(--space-4); }

h1, h2, h3 { color: var(--ink); margin: 0 0 var(--space-3); }
h1 { font-size: var(--fs-2xl); line-height: 1.2; }
h2 { font-size: var(--fs-xl);  line-height: 1.22; }
h3 { font-size: var(--fs-lg);  line-height: 1.25; }
p  { font-size: var(--fs-md); margin: 0 0 var(--space-4); color: var(--ink); }
.lead { font-size: var(--fs-lg); color: var(--muted); max-width: 70ch; }

/* Skip link näkyviin fokuksessa */
.skip-link {
  position: absolute; left: -9999px; top: auto;
}
.skip-link:focus {
  left: 1rem; top: 1rem; background: var(--brand); color: #fff;
  padding: .5rem .75rem; border-radius: 10px; z-index: 999;
}

/* ---------------------------
   3) Header + navigaatio (km-*)
---------------------------- */
.km-header{
  display: flex; align-items: center; justify-content: space-between;
  padding: .6rem 1rem;
  background: rgba(255,255,255,.75);
  backdrop-filter: saturate(150%) blur(6px);
  border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 50;
}
@media (prefers-color-scheme: dark){
  .km-header{ background: rgba(16,12,22,.6); }
}
.km-brand img{ height:44px; width:auto; max-height:56px; display:block; }
@media (min-width:1000px){ .km-brand img{ height:52px; } }

.km-nav{ flex:1; }
.km-menu{ list-style:none; margin:0; padding:0; display:flex; gap:.5rem; justify-content:flex-end; flex-wrap:wrap; }
.km-item{ position:relative; }
.km-link, .km-sub-toggle{
  display:inline-flex; align-items:center; gap:.55rem;
  padding:10px 14px; border-radius:999px;
  border:1px solid var(--ring);
  background:var(--brand-05);
  color:var(--brand);
  font-weight:800; font-size:var(--fs-sm); line-height:1;
  cursor:pointer; text-decoration:none;
  transition: filter .16s ease, background .16s ease, color .16s ease;
}
.km-link:hover, .km-sub-toggle:hover{ filter:brightness(.97); }
.km-link:focus-visible, .km-sub-toggle:focus-visible{
  outline:3px solid var(--ring); outline-offset:2px;
}
.km-link[aria-current="page"]{
  background: var(--brand); color:#fff; border-color: var(--brand);
}

/* Alavalikko */
.km-sub{
  position:absolute; top:100%; left:0; min-width:220px;
  list-style:none; margin:0; padding:.5rem;
  background:var(--card); border:1px solid var(--border);
  border-radius:12px; box-shadow:0 8px 16px rgba(0,0,0,.08);
  display:none; z-index:1000;
}
.km-has-sub.km-open > .km-sub{ display:block; }
.km-sub li a{
  display:block; padding:.45rem .75rem; border-radius:8px; color:var(--brand); font-weight:700; text-decoration:none;
}
.km-sub li a:hover{ background: var(--brand-05); }

/* Mobiilissa pinoon */
@media (max-width:800px){
  .km-menu{ flex-direction:column; align-items:flex-start; }
  .km-sub{ position:static; box-shadow:none; border:0; padding:0; display:none; }
  .km-has-sub.km-open > .km-sub{ display:block; }
}

/* ---------------------------
   4) Kortit, grid & listat
---------------------------- */
.cards{ display:grid; gap: var(--space-5); grid-template-columns: repeat(3, minmax(0,1fr)); }
@media (max-width:1024px){ .cards{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width:640px){  .cards{ grid-template-columns: 1fr; } }

.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
}
.card-link{ display:flex; flex-direction:column; height:100%; }
.card-link:focus-visible{ outline:3px solid var(--ring); outline-offset:3px; border-radius:12px; }
.card-media{ aspect-ratio:16/9; overflow:hidden; background:#f6f6fb; margin:0; }
.card-media img{ width:100%; height:100%; object-fit:cover; display:block; }
.card-content{ padding: 1rem 1.1rem; display:flex; flex-direction:column; gap:.35rem; }
.card-title{ font-size: 1.15rem; line-height:1.3; margin:0; color: var(--ink); font-weight:800; }
.card-meta{ margin:0; color: var(--muted); font-size:.95rem; }
.card-excerpt{ margin:0; color: var(--ink); }
.btn-inline{ margin-top:.35rem; text-decoration: underline; font-weight:700; }

/* Linkit & lähteet -sivun kortit */
.links-page{ background: var(--bg); }
.page-hero{ max-width: var(--container); margin:0 auto; padding: 2.25rem 1.25rem 1rem; text-align:center; }
.page-hero h1{ font-size: var(--fs-xl); color: var(--brand); margin:.25rem 0 .5rem; }
.page-hero .lead{ max-width:70ch; margin:0 auto; color: var(--muted); }
.toc{ margin:1rem auto 0; display:flex; flex-wrap:wrap; gap:.5rem; justify-content:center; }
.toc a{
  padding:.5rem .75rem; border-radius:999px; background:var(--brand-05);
  color:var(--brand); text-decoration:none; border:1px solid var(--ring); font-weight:800;
}
.toc a:hover{ filter:brightness(.98); }
.link-section{ max-width: var(--container); margin:2rem auto; padding: 0 1.25rem; }
.link-section h2{ color: var(--brand); font-size: 1.4rem; margin: 0 0 .75rem; }
.backtop{ margin:.75rem 0 0; }
.backtop a{ color:var(--muted); text-decoration:none; }
.backtop a:hover{ color:var(--brand); }

.link-grid{ list-style:none; margin:0; padding:0; display:grid; gap:1rem; grid-template-columns: repeat(3, minmax(0,1fr)); }
@media (max-width:1024px){ .link-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width:640px){  .link-grid{ grid-template-columns: 1fr; } }

.link-card{
  background:var(--card); border:1px solid rgba(0,0,0,.06); border-radius:14px;
  box-shadow:0 2px 10px rgba(0,0,0,.05); overflow:hidden;
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.link-card:hover{ transform: translateY(-2px); box-shadow:0 8px 22px rgba(0,0,0,.10); border-color: rgba(0,0,0,.1); }
.card-link{ padding:1rem 1.1rem; gap:.45rem; }

.meta{ display:flex; gap:.5rem; align-items:center; margin-top:.1rem; }
.badge{
  display:inline-flex; align-items:center; gap:.35rem; font-size:.75rem; font-weight:800; letter-spacing:.01em;
  padding:.28rem .5rem; border-radius:999px; border:1px solid var(--ring); background:var(--brand-05); color: var(--brand);
}
.badge.lang{ background:#eef8ff; color:#005a99; border-color:rgba(0,90,153,.2); }
.badge.type{ background:#f7f7fa; color:#444; border-color:rgba(0,0,0,.08); }
.ext{
  width:14px; height:14px; margin-left:auto; opacity:.7; flex-shrink:0; color:var(--muted);
  background:
    conic-gradient(from 45deg at 60% 40%, currentColor 0 25%, transparent 0) top right/10px 10px no-repeat,
    linear-gradient(currentColor,currentColor) 75% 25%/10px 1.6px no-repeat;
}

/* ---------------------------
   5) Etusivu – hero & kuvitus
---------------------------- */
.hero{ max-width: var(--container); margin:0 auto; padding: 2.5rem 1.25rem 1rem; }
.hero .meta-row{ display:flex; justify-content:flex-end; color:var(--muted); font-size:var(--fs-sm); }
.hero h1{ font-size: var(--fs-3xl); margin:.25rem 0 .5rem; }

/* Teemat-kuvitus korttina (toimii <img.kuvitus> tai <figure.kuvitus><img>) */
.kuvitus{
  display:block; max-width:420px; width:100%;
  margin: var(--space-6) auto;
}
.kuvitus:not(img){
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: var(--space-3);
}
.kuvitus:not(img) > img{
  width:100%; height:auto;
  border-radius: calc(var(--radius) - 4px);
}
.kuvitus:is(img){
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: var(--space-3);
  box-sizing: border-box;
}
@media (max-width:640px){ .kuvitus{ max-width:320px; } }

/* ---------------------------
   6) Artikkeli / Prose
---------------------------- */
.article-wrap { padding-block: var(--space-6); }
.prose p { margin: 1rem 0; }
.prose h1 { line-height: 1.22; }
.hero-layout{ display:flex; flex-wrap:wrap; align-items:center; gap:1.5rem; }
.hero-text{ flex:1 1 300px; }
.hero-image{ flex:0 0 220px; margin:0; }
.hero-image img{
  width:100%; height:auto; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.08);
  border:1px solid var(--border);
}

/* Takaisin-linkki */
.back{ margin:.5rem 0 1rem; }
.back a{ display:inline-flex; align-items:center; gap:.4rem; text-decoration:none; color:var(--muted); }
.back a:hover{ color: var(--brand); }

/* ---------------------------
   7) Lomake (Ota yhteyttä)
---------------------------- */
.form-wrap{ margin-top:1rem; max-width:800px; }
.form-card{
  background:var(--card); border:1px solid var(--border);
  box-shadow:var(--shadow); border-radius:var(--radius);
  padding:1rem;
}
.form-grid{ display:grid; gap:1rem; grid-template-columns:1fr 1fr; }
.form-grid .full{ grid-column:1 / -1; }
@media (max-width:720px){ .form-grid{ grid-template-columns:1fr; } }

label{ font-weight:800; display:block; margin:.25rem 0 .25rem; }
.hint{ color:var(--muted); font-size:var(--fs-sm); margin-left:.25rem; font-weight:600; }

input, textarea{
  width:100%; border:1px solid var(--border); border-radius:12px;
  background:var(--card); color:var(--ink);
  padding:.75rem .9rem; font-size:var(--fs-md);
}
input:focus, textarea:focus{ outline:3px solid var(--ring); outline-offset:2px; }
textarea{ min-height:160px; resize:vertical; }

.actions{ display:flex; gap:.75rem; align-items:center; margin-top:.5rem; }
.btn{
  --pad-x:16px; --pad-y:10px;
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
  padding:var(--pad-y) var(--pad-x); border-radius:999px;
  border:1px solid var(--ring); background:var(--brand); color:#fff;
  font-size:var(--fs-sm); font-weight:800; line-height:1; cursor:pointer;
  transition: filter .16s ease, transform .06s ease;
}
.btn:hover{ filter:brightness(.97); }
.btn:active{ transform: translateY(1px); }
.btn[disabled]{ opacity:.65; cursor:not-allowed; }

#form-status{ min-height:1.25rem; }
#form-status.ok{ color:#0a7a2e; }
#form-status.err{ color:#b42318; }
#form-status.pending{ color:#7a5eff; }

.privacy{ margin-top:.75rem; color:var(--muted); font-size:var(--fs-sm); }

/* ---------------------------
   8) Footer
---------------------------- */
footer{ border-top:1px solid var(--border); margin-top:2rem; }
.site-footer{ max-width: var(--container); margin:0 auto; padding:1rem 1.25rem; color:var(--muted); font-size: var(--fs-sm); }

/* ---------------------------
   9) Hyödylliset util-luokat
---------------------------- */
.mt-0{margin-top:0} .mb-0{margin-bottom:0}
.mt-2{margin-top:var(--space-2)} .mb-2{margin-bottom:var(--space-2)}
.mt-4{margin-top:var(--space-4)} .mb-4{margin-bottom:var(--space-4)}
.mt-6{margin-top:var(--space-6)} .mb-6{margin-bottom:var(--space-6)}
.center{ display:grid; place-items:center; }
.hide{ display:none !important; }

/* ---------------------------
   10) Liikemieltymys
---------------------------- */
@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{ transition-duration:.001ms !important; animation-duration:.001ms !important; scroll-behavior: auto !important; }
}
